<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L·ªãch s·ª≠ - File Transfer RSA</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="dashboard">
        <nav class="navbar">
            <div class="nav-brand">
                <h2>üìã L·ªãch s·ª≠ truy·ªÅn file</h2>
            </div>
            <div class="nav-user">
                <a href="/dashboard" class="btn btn-secondary">üè† Quay l·∫°i Dashboard</a>
                <a href="/logout" class="btn btn-secondary">ƒêƒÉng xu·∫•t</a>
            </div>
        </nav>
        
        <div class="dashboard-content">
            <div class="sidebar">
                <div class="menu">
                    <a href="/dashboard" class="menu-item">
                        <span>üè†</span> Trang ch·ªß
                    </a>
                    <a href="/upload" class="menu-item">
                        <span>üì§</span> G·ª≠i file
                    </a>
                    <a href="/history" class="menu-item active">
                        <span>üìã</span> L·ªãch s·ª≠
                    </a>
                    {% if is_admin %}
                    <a href="/admin" class="menu-item">
                        <span>‚öôÔ∏è</span> Qu·∫£n tr·ªã
                    </a>
                    {% endif %}
                </div>
            </div>
            
            <div class="main-content">
                <div class="history-header">
                    <h1>üìã L·ªãch s·ª≠ truy·ªÅn file</h1>
                    {% if is_admin %}
                        <p>Xem t·∫•t c·∫£ l·ªãch s·ª≠ file trong h·ªá th·ªëng</p>
                    {% else %}
                        <p>L·ªãch s·ª≠ file b·∫°n ƒë√£ g·ª≠i v√† nh·∫≠n</p>
                    {% endif %}
                </div>
                
                <div class="history-content">
                    {% if files %}
                    <div class="table-container">
                        <table class="history-table">
                            <thead>
                                <tr>
                                    <th>File</th>
                                    <th>Ng∆∞·ªùi g·ª≠i</th>
                                    <th>Ng∆∞·ªùi nh·∫≠n</th>
                                    <th>Th·ªùi gian g·ª≠i</th>
                                    <th>Tr·∫°ng th√°i</th>
                                    <th>Thao t√°c</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for file in files %}
                                <tr>
                                    <td>
                                        <div class="file-cell">
                                            <span class="file-icon">üìÑ</span>
                                            <div class="file-info">
                                                <div class="file-name">{{ file.filename }}</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="user-badge">{{ file.sender }}</span>
                                    </td>
                                    <td>
                                        <span class="user-badge">{{ file.receiver }}</span>
                                    </td>
                                    <td>
                                        <div class="timestamp">
                                            <div>{{ file.timestamp[:10] }}</div>
                                            <small>{{ file.timestamp[11:19] }}</small>
                                        </div>
                                    </td>
                                    <td>
                                        {% if file.verified %}
                                            <span class="status verified">‚úÖ ƒê√£ x√°c minh</span>
                                            {% if file.verified_at %}
                                            <small class="verify-time">{{ file.verified_at[:19] }}</small>
                                            {% endif %}
                                        {% else %}
                                            <span class="status pending">‚è≥ Ch∆∞a x√°c minh</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if file.verified or is_admin %}
                                        <a href="/api/download/{{ file.id }}" class="btn btn-sm btn-primary">
                                            üì• T·∫£i xu·ªëng
                                        </a>
                                        {% else %}
                                        <span class="text-muted">Ch∆∞a th·ªÉ t·∫£i</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    {% else %}
                    <div class="empty-state">
                        <div class="empty-icon">üì≠</div>
                        <h3>Ch∆∞a c√≥ l·ªãch s·ª≠</h3>
                        <p>B·∫°n ch∆∞a g·ª≠i ho·∫∑c nh·∫≠n file n√†o</p>
                        <a href="/upload" class="btn btn-primary">G·ª≠i file ƒë·∫ßu ti√™n</a>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
s